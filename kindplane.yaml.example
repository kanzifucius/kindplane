# kindplane configuration file
# Generated by 'kindplane init'

cluster:
  # Name of the Kind cluster
  name: kindplane-dev
  
  # Kubernetes version to use (optional, uses Kind default if not specified)
  kubernetesVersion: "1.29.0"
  
  # Node configuration
  nodes:
    controlPlane: 1
    workers: 1
  
  # Port mappings from container to host
  # Format: containerPort:hostPort/protocol
  portMappings:
    - containerPort: 80
      hostPort: 8080
      protocol: TCP
    - containerPort: 443
      hostPort: 8443
      protocol: TCP
  
  # Mount host paths into Kind nodes
  # extraMounts:
  #   - hostPath: /tmp/kindplane-data
  #     containerPath: /data
  #     readOnly: false
  
  # Ingress controller readiness configuration
  # When enabled, adds required labels and port mappings for ingress controllers
  ingress:
    enabled: true
  
  # Optional: path to a raw Kind config file
  # Settings from kindplane.yaml will be merged on top (kindplane wins)
  # rawConfigPath: ""

crossplane:
  # Crossplane version to install
  version: "1.15.0"
  
  # Crossplane providers to install
  # Use full OCI package path with version tag
  providers:
    - name: provider-aws
      package: xpkg.upbound.io/upbound/provider-aws:v1.1.0
    - name: provider-azure
      package: xpkg.upbound.io/upbound/provider-azure:v1.0.0
    - name: provider-kubernetes
      package: xpkg.upbound.io/crossplane-contrib/provider-kubernetes:v0.12.0

credentials:
  # AWS credentials configuration
  aws:
    # Source: env (environment variables), file (credentials file), profile (AWS CLI profile)
    source: env
    profile: default
  
  # Azure credentials configuration
  azure:
    # Source: env (environment variables), file (credentials file)
    source: env
  
  # Kubernetes provider credentials
  kubernetes:
    # Source: incluster (use service account), kubeconfig (use kubeconfig file)
    source: incluster

# External Secrets Operator configuration
eso:
  enabled: true
  version: "0.9.11"

# Additional Helm charts to install
# Phases: pre-crossplane, post-crossplane, post-providers, post-eso (default)
charts: []
  # Example: Install nginx ingress controller
  # - name: nginx-ingress
  #   repo: https://kubernetes.github.io/ingress-nginx
  #   chart: ingress-nginx
  #   version: "4.9.0"
  #   namespace: ingress-nginx
  #   phase: post-eso
  #   wait: true
  #   timeout: 5m
  #   values:
  #     controller:
  #       replicaCount: 1
  #
  # Example: Install cert-manager before Crossplane
  # - name: cert-manager
  #   repo: https://charts.jetstack.io
  #   chart: cert-manager
  #   version: "1.14.0"
  #   namespace: cert-manager
  #   phase: pre-crossplane
  #   values:
  #     installCRDs: true
  #
  # Example: Install with external values file
  # - name: prometheus
  #   repo: https://prometheus-community.github.io/helm-charts
  #   chart: kube-prometheus-stack
  #   namespace: monitoring
  #   valuesFiles:
  #     - ./values/prometheus.yaml

# Crossplane compositions and XRDs
compositions:
  # Sources to load compositions from
  sources: []
  # Example local source:
  # - type: local
  #   path: ./compositions
  #
  # Example git source:
  # - type: git
  #   repo: https://github.com/your-org/crossplane-compositions.git
  #   branch: main
  #   path: /compositions
